<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <i class="fa fa-align-justify"></i> <strong>Thông tin đơn hàng</strong>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><i class="fa fa-map-marker"></i> Trạng thái: <span class="badge badge-danger"> {{orderService.orderRe.status | tempStatus: status}}</span>
                        </p>
                        <p><i class="fa fa-qrcode"></i> Mã đơn: {{orderService.orderRe.id}} <i
                                class="fa fa-calendar"></i></p>
                        <p><i class="fa fa-calendar"></i> Ngày tạo: {{orderService.orderRe.created_at | tempDate}}</p>
                    </div>
                    <div class="col-md-6">
                        <p><i class="fa fa-money"></i> Tổng tiền: {{orderService.orderRe | tempTongTienHang : 1}} <sup>
                            đ</sup>
                        <p *ngIf="orderService.orderRe.cart && orderService.orderRe.cart[0]"><i class="fa fa-edge"></i>
                            Đặt tại website: <span
                                    class="badge badge-danger"> {{orderService.orderRe.cart[0].site}}</span></p>
                        <p *ngIf="orderService.orderRe.shop"><i class="fa fa fa-anchor"></i> Shop: <span
                                class="badge badge-danger"> {{orderService.orderRe.shop.name}}</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <i class="cui-comment-square icons"></i> <strong>Thông tin trao đổi</strong>
            </div>
            <div #scrollMe class="card-body comment-content">
                <div *ngFor="let item of comments" class="comment-item {{item.is_admin? 'admin-comment-item': ''}}"
                     title="{{item.created_at}}">
                    <b>{{item.user_name}}: </b>{{item.content}}
                </div>
            </div>
            <div class="card-footer">
                <div class="form-group">
                    <div class="controls">
                        <div class="input-group"><input [(ngModel)]="comment.content" #content="ngModel"
                                                        class="form-control" id="content" name="content" size="16"
                                                        type="text"><span class="input-group-append"><button
                                (click)="addComment()"
                                class="btn btn-secondary" type="button">Gửi đi</button></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<p class="text-right"><span>Tỉ giá: {{orderService.orderRe.rate}}</span></p>
<form novalidate #form="ngForm" class="form-horizontal">
    <div class="card">
        <div class="card-body">
            <table class="table table-bordered table-sm table-data">
                <thead>
                <tr>
                    <th>Mã KS</th>
                    <th>Tên shop</th>
                    <th>Ghi chú</th>
                    <th>Tổng link/Tg SL</th>
                    <th>Ship khách</th>
                    <th>Trả shop</th>
                    <th>Mã vận đơn</th>
                    <th>Mã hợp đồng</th>
                    <th>Trạng thái shop</th>
                    <th>Ghi chú thanh lý</th>
                </tr>
                </thead>
                <tbody *ngIf="orderService.orderRe && orderService.orderRe.package && orderService.orderRe.package.length > 0">
                <ng-template ngFor let-item [ngForOf]="orderService.orderRe.package" let-i="index">
                    <tr>
                        <td>{{item.id}}</td>
                        <td><p *ngIf="i===0">{{orderService.orderRe.shop.name}}</p></td>
                        <td></td>
                        <td><p *ngIf="i===0">
                            {{orderService.orderRe.count_link}}/{{orderService.orderRe.count_product}}</p>
                        </td>
                        <td>{{item.ship_khach}}</td>
                        <td><p *ngIf="item.tra_shop"><span>¥</span>{{item.tra_shop | tempPrice: 1 : 1 : false}}</p></td>
                        <td>{{item.package_code}}</td>
                        <td>{{item.contract_code}}</td>
                        <td>{{item.status | tempPkStatus : pkStatus}}</td>
                        <td>{{item.note_tl}}</td>
                    </tr>
                </ng-template>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            <table class="table table-bordered table-sm table-data">
                <thead>
                <tr>
                    <th>Mã, link</th>
                    <th>Hình ảnh</th>
                    <th>Màu sắc</th>
                    <th>Size/mẫu</th>
                    <th>Khách đặt</th>
                    <th>Đơn giá</th>
                    <th>Thành tiền</th>
                    <th>Ghi chú</th>
                    <th>Ghi chú NV</th>
                </tr>
                </thead>
                <tbody *ngIf="orderService.orderRe && orderService.orderRe.cart && orderService.orderRe.cart.length > 0">
                <ng-template ngFor let-item [ngForOf]="orderService.orderRe.cart" let-i="index">
                    <tr class="{{item.amount? '' : 'yl-bg'}}">
                        <td>
                            <p><span class="badge badge-warning">{{item.id}}</span></p>
                            <p><a target="_blank" rel="noopener noreferrer" href="{{item.pro_link}}">Xem</a></p>
                        </td>
                        <td><img src="{{item.image}}"></td>
                        <td><p *ngIf="item.colortxt" class="pull-left m-1">{{item.colortxt}}</p></td>
                        <td><p *ngIf="item.sizetxt" class="pull-left m-1">{{item.sizetxt}}</p></td>
                        <td>{{item.amount}}</td>
                        <td>
                            <p *ngIf="orderService.orderRe">{{item.price | tempPrice:
                                orderService.orderRe.rate :
                                1}}<sup>đ</sup></p>
                            <p><span>¥</span>{{item.price | tempPrice: 1 : 1: false}}</p>
                        </td>
                        <td>
                            <p>{{item.price | tempPrice: orderService.orderRe.rate : item.amount}}<sup>đ</sup></p>
                            <p><span>¥</span>{{item.price | tempPrice: 1 : item.amount: false}}</p>
                        </td>
                        <td>{{item.note}}</td>
                        <td>{{item.nv_note}}</td>
                    </tr>
                </ng-template>
                </tbody>
            </table>
        </div>
    </div>
</form>

